"use strict";(self.webpackChunkens_app=self.webpackChunkens_app||[]).push([[291],{68298:function(e,t,n){n.r(t),n.d(t,{default:function(){return _},useResetState:function(){return A}});var r,a,i=n(18489),o=n(23430),s=n(17186),c=n(32765),l=n(50390),u=n(60048),d=n(92411),f=n(41874),h=n(98687),v=n(89743),m=n(68476),p=n(10541),x=n(86816),g=n(60606),y=n.n(g),b=n(19840),j=n(62559),w=(0,c.Z)("svg",{target:"elaobtv0"})(""),Z=function(){return(0,j.jsx)(w,{width:"42",height:"41",xmlns:"http://www.w3.org/2000/svg",children:(0,j.jsx)("path",{d:"M17.857 4.453C14.284.518 8.553.518 4.98 4.453l-.336.37C.452 9.44.452 16.984 4.642 21.598l16.16 17.8c.124.135.27.135.393-.001l16.16-17.799c4.194-4.617 4.193-12.156-.002-16.777l-.336-.37c-3.574-3.936-9.3-3.936-12.876 0l-1.373 1.512a2.372 2.372 0 0 1-3.538 0l-1.373-1.511z",stroke:"#E7E7E7",strokeWidth:"3",fill:"none",fillRule:"evenodd",opacity:".7"})})},k=n(24794),C=n(66995),D=n(63926),S=n(4329),I=n(34242);var E=(0,c.Z)("div",{target:"eyj8ccp0"})({name:"1xknjez",styles:"grid-area:selectall;display:flex;justify-content:flex-end;padding-right:40px;margin:2em 0;"}),O=(0,c.Z)("div",{target:"eyj8ccp1"})({name:"1de598y",styles:"display:flex;padding:40px;flex-direction:column;justify-content:center;align-items:center;background:white;box-shadow:3px 4px 6px 0 rgba(229,236,241,0.3);border-radius:6px;margin-bottom:40px;h2{color:#adbbcd;font-weight:100;margin-bottom:0;padding:0;margin-top:20px;text-align:center;max-width:500px;}p{color:#2b2b2b;font-size:18px;font-weight:300;margin-top:20px;line-height:1.3em;text-align:center;max-width:400px;}"}),q=(0,c.Z)(b.H2,{target:"eyj8ccp2"})("margin-top:50px;margin-left:20px;",x.ZP.medium(r||(r=(0,s.Z)(["\n    margin-left: 0;\n  "]))),""),N=function(){var e=(0,u.$)().t;return(0,j.jsxs)(O,{children:[(0,j.jsx)(Z,{}),(0,j.jsx)("h2",{children:e("favourites.nofavouritesDomains.title")}),(0,j.jsx)("p",{children:e("favourites.nofavouritesDomains.text")})]})};function F(e){var t=y()(parseInt(1e3*e));return y()().subtract(90,"days").diff(t)>0}function P(e,t){return!e||t||0===parseInt(e,16)?"Open":"Owned"}var R=(0,m.Ps)(a||(a=(0,s.Z)(["\n  query resetStateQuery @client {\n    networkId\n  }\n"]))),A=function(e,t,n){var r=(0,v.a)(R).data.networkId;(0,l.useEffect)((function(){e(1),t({}),n(null)}),[r])};var T=(0,c.Z)("div",{target:"eyj8ccp3"})({name:"6w9fxc",styles:"padding-bottom:60px;"}),_=function(){var e,t=(0,u.$)().t;(0,l.useEffect)((function(){document.title="ENS Favourites"}),[]);var n=(0,l.useState)(1),r=(0,o.Z)(n,2),a=r[0],s=r[1],c=(0,l.useState)({}),m=(0,o.Z)(c,2),x=m[0],g=m[1],y=(0,l.useState)(!1),b=(0,o.Z)(y,2),w=b[0],O=b[1],R=(0,D.m)();A(s,g,O);var _=(0,v.a)(p.iG).data,z=(_=void 0===_?[]:_).favourites;(0,l.useEffect)((function(){document.title="ENS Favourites"}),[]);var B=(0,v.a)(p.PM).data,M=(B=void 0===B?[]:B).subDomainFavourites,$=(0,v.a)(p.Cg).data.globalError,G=(0,S.lO)(z,"name");if($.invalidCharacter||!G)return(0,j.jsx)(I.cZ,{message:$.invalidCharacter});var H=G&&(null===(e=G.map((function(e){try{return(0,h.getNamehash)(e.name)}catch(t){return console.error("Error getting favourite ids: ",t),null}})))||void 0===e?void 0:e.filter((function(e){return e}))),J=(0,v.a)(p.k_,{variables:{ids:H},fetchPolicy:"no-cache",nextFetchPolicy:"no-cache",context:{queryDeduplication:!1}}),L=J.data,Q=(L=void 0===L?[]:L).registrations,W=J.refetch;if(!G||0===G.length&&!Q)return(0,j.jsx)(N,{});var Y=[];if(G.length>0&&(Y=Q&&Q.length>0?G.map((function(e){try{var t=Q.filter((function(t){return t.domain.id===(0,h.getNamehash)(e.name)}))[0];return{name:e.name,owner:t&&t.registrant.id,available:F(t&&t.expiryDate),expiryDate:t&&t.expiryDate,hasInvalidCharacter:e.hasInvalidCharacter}}catch(n){return{name:e.name,hasInvalidCharacter:!0,available:!1,expiryDate:!1}}})):G.map((function(e){return{name:e.name,hasInvalidCharacter:e.hasInvalidCharacter}}))),!(Y&&Y.length>0||M&&M.length>0))return(0,j.jsxs)(T,{"data-testid":"favourites-container",children:[(0,j.jsx)(q,{children:t("favourites.favouriteTitle")}),(0,j.jsxs)(N,{children:[(0,j.jsx)(Z,{}),(0,j.jsx)("h2",{children:t("favourites.nofavouritesDomains.title")}),(0,j.jsx)("p",{children:t("favourites.nofavouritesDomains.text")})]})]});var K=Object.entries(x).filter((function(e){var t=(0,o.Z)(e,2);t[0];return t[1]})).map((function(e){return(0,o.Z)(e,1)[0]})),U=Y.map((function(e){return e.name})),V=Y.filter((function(e){return e.expiryDate&&e.owner!==(null===R||void 0===R?void 0:R.toLowerCase())&&x[e.name]})).length>0,X=Y.filter((function(e){return e.expiryDate})).length>0;return(0,j.jsxs)(T,{"data-testid":"favourites-container",children:[(0,j.jsx)(q,{children:t("favourites.favouriteTitle")}),X&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(k.Z,{years:a,setYears:s,selectedNames:K,setCheckedBoxes:g,setSelectAll:O,allNames:U,refetch:W,data:[],getterString:"registrations",checkedOtherOwner:V}),(0,j.jsx)(E,{children:(0,j.jsx)(C.Z,{testid:"checkbox-renewall",type:"double",checked:w,onClick:function(){w?g({}):function(){var e=Y.reduce((function(e,t){return t.expiryDate&&(e[t.name]=!0),e}),{});g(e)}(),O((function(e){return!e}))}})})]}),Y&&Y.map((function(e){return(0,j.jsx)(f.Z,{domain:(0,i.Z)((0,i.Z)({},e),{},{state:P(e.owner,e.available),owner:e.owner}),isFavourite:!0,checkedBoxes:x,setCheckedBoxes:g,setSelectAll:O,hasInvalidCharacter:e.hasInvalidCharacter},e.name)})),M&&M.map((function(e){return(0,j.jsx)(d.A,{query:p.ik,variables:{name:e.name},children:function(t){var n=t.loading,r=t.error,a=t.data;return r?(0,j.jsx)("div",{children:(console.log(r),JSON.stringify(r))}):(0,j.jsx)(f.Z,{loading:n,domain:(0,i.Z)((0,i.Z)({},e),{},{state:P(null===a||void 0===a?void 0:a.getOwner,!1),owner:null===a||void 0===a?void 0:a.getOwner}),isSubDomain:!0,isFavourite:!0})}},e.name)}))]})}},92411:function(e,t,n){n.d(t,{A:function(){return o}});var r=n(94050),a=n(70188),i=n(89743);function o(e){var t=e.children,n=e.query,a=(0,r._T)(e,["children","query"]),o=(0,i.a)(n,a);return o?t(o):null}o.propTypes={client:a.object,children:a.func.isRequired,fetchPolicy:a.string,notifyOnNetworkStatusChange:a.bool,onCompleted:a.func,onError:a.func,pollInterval:a.number,query:a.object.isRequired,variables:a.object,ssr:a.bool,partialRefetch:a.bool,returnPartialData:a.bool}}}]);
//# sourceMappingURL=Favourites.2915eeb2-aa99a.chunk.js.map